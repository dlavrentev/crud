{"ast":null,"code":"import _slicedToArray from\"/Users/dimitrismacbook/Desktop/coding/crud/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext,useRef}from'react';import axios from'axios';import{Link}from\"react-router-dom\";import'./header.css';import{UserContext}from'../../context/UserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Header(_ref){var baseUrl=_ref.baseUrl;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),signupSuccess=_useState2[0],setSignupSuccess=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loggedIn=_useState4[0],setLoggedIn=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errorlog=_useState6[0],setErrorlog=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modal=_useState8[0],setModal=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),userExists=_useState10[0],setUserExists=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),username=_useState12[0],setUsername=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),password=_useState14[0],setPassword=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),imageUrl=_useState16[0],setImageUrl=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),message=_useState18[0],setMessage=_useState18[1];var colorRef=useRef();var _useContext=useContext(UserContext),user=_useContext.user,setUser=_useContext.setUser;var handleSignup=function handleSignup(e){e.preventDefault();axios.post(\"\".concat(baseUrl,\"/users/register\"),{username:username,password:password,imageUrl:imageUrl}).then(function(res){setSignupSuccess(true);console.log(res.data);}).catch(function(err){return console.log(err);});};var handleLogin=function handleLogin(e){e.preventDefault();axios.post(\"\".concat(baseUrl,\"/users/login\"),{username:username,password:password}).then(function(res){setUser(res.data);setLoggedIn(true);setModal(false);colorRef.current.style.backgroundColor='salmon';}).catch(function(err){setErrorlog(true);});};var handleLogout=function handleLogout(){setUser({});setLoggedIn(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"header-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(Link,{className:\"td-big\",to:\"/\",children:\"Travel Diaries\"})}),/*#__PURE__*/_jsx(\"h1\",{children:/*#__PURE__*/_jsx(Link,{className:\"td-small\",to:\"/\",children:\"TD\"})}),loggedIn?/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container-loggedin\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"add-destination-container\",children:[/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(Link,{to:\"/add-destination\",children:\"Add a new destination\"})}),/*#__PURE__*/_jsx(\"p\",{children:user.username})]}),/*#__PURE__*/_jsx(\"div\",{className:\"img-container\",children:/*#__PURE__*/_jsx(\"img\",{src:user.imageUrl,alt:\"avatar\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:handleLogout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"profile-container-loggedout\",children:modal?/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",style:{backgroundColor:\"salmon\"},onClick:function onClick(){setModal(!modal);setErrorlog(false);},children:\"Login\"}):/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",style:{backgroundColor:\"green\"},onClick:function onClick(){setModal(!modal);setErrorlog(false);},children:\"Login\"})}),modal?/*#__PURE__*/_jsxs(\"div\",{className:\"header-modal\",children:[/*#__PURE__*/_jsx(\"h3\",{onClick:function onClick(){setModal(false);},children:\"X\"}),userExists?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",type:\"submit\",onChange:function onChange(e){return setImageUrl(e.target.value);},children:\"Submit\"})]}),errorlog?/*#__PURE__*/_jsx(\"p\",{style:{\"color\":\"#FFE66D\"},children:\"Wrong password or username..\"}):null,/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setUserExists(false);},children:\"Sign up\"})]}),message!==''?/*#__PURE__*/_jsx(\"p\",{children:message}):null]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign Up\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSignup,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter username\",onChange:function onChange(e){return setUsername(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter password\",onChange:function onChange(e){return setPassword(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter image url\",onChange:function onChange(e){return setImageUrl(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"login-btn\",type:\"submit\",children:\"Submit\"})]}),signupSuccess?/*#__PURE__*/_jsxs(\"p\",{style:{\"color\":\"green\"},children:[\"Signed up successfully. \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setUserExists(true);},children:\"Login\"})]}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setUserExists(true);},children:\"Login\"})]})]})]}):null]});}","map":{"version":3,"sources":["/Users/dimitrismacbook/Desktop/coding/crud/src/components/Header/Header.js"],"names":["React","useState","useContext","useRef","axios","Link","UserContext","Header","baseUrl","signupSuccess","setSignupSuccess","loggedIn","setLoggedIn","errorlog","setErrorlog","modal","setModal","userExists","setUserExists","username","setUsername","password","setPassword","imageUrl","setImageUrl","message","setMessage","colorRef","user","setUser","handleSignup","e","preventDefault","post","then","res","console","log","data","catch","err","handleLogin","current","style","backgroundColor","handleLogout","target","value"],"mappings":"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","sourcesContent":["import React,{useState, useContext, useRef} from 'react'\nimport axios from 'axios';\nimport {Link} from \"react-router-dom\"\nimport './header.css'\nimport { UserContext } from '../../context/UserContext';\n\n\nexport default function Header({baseUrl}) {\n  const [signupSuccess,setSignupSuccess]=useState(false)\n  const [loggedIn,setLoggedIn]=useState(false)\n  const [errorlog,setErrorlog]=useState('')\n  const [modal,setModal]=useState(false)\n  const [userExists,setUserExists]=useState(true)\n  const [username,setUsername]=useState('')\n  const [password,setPassword]=useState('')\n  const [imageUrl,setImageUrl]=useState('')\n  const [message,setMessage]=useState('')\n  \n  const colorRef = useRef();\n  \n\n  const {user,setUser}=useContext(UserContext)\n  \n  \n  \n  const handleSignup=(e)=>{\n    e.preventDefault()\n    axios.post(`${baseUrl}/users/register`,{\n      username,password,imageUrl\n    })\n    .then(res=>{\n      setSignupSuccess(true)\n      console.log(res.data)\n    })\n    .catch(err=>console.log(err))\n\n  }\n \n\n\n  const handleLogin=(e)=>{ \n    e.preventDefault()\n    axios.post(`${baseUrl}/users/login`,{\n      username,password\n    })\n    .then(res=>{\n      setUser(res.data)\n      setLoggedIn(true)\n      setModal(false)\n      colorRef.current.style.backgroundColor = 'salmon';\n    })\n    .catch(err=>{\n      setErrorlog(true)\n    })\n\n  }\n\n  const handleLogout=()=>{\n    setUser({})\n    setLoggedIn(false)\n  }\n\n\n  return (\n    <div className='header-container'>\n      <h1><Link className='td-big' to=\"/\">Travel Diaries</Link></h1>\n      <h1><Link className='td-small' to=\"/\">TD</Link></h1>\n        {\n         loggedIn ?\n         <div className='profile-container-loggedin'>\n           <div className='add-destination-container'>\n           <button><Link to=\"/add-destination\">Add a new destination</Link></button>\n           <p>{user.username}</p>\n           </div>\n           \n           <div className='img-container'>\n            <img src={user.imageUrl} alt=\"avatar\"/>\n           </div>  \n           <button className='logout-btn' onClick={handleLogout}>Logout</button>\n         </div>\n         \n         : <div className='profile-container-loggedout'>\n             {\n              modal ? <button className='login-btn' style={{backgroundColor: \"salmon\"}} onClick={() => { setModal(!modal); setErrorlog(false);}}>Login</button>\n              : <button className='login-btn' style={{backgroundColor: \"green\"}}  onClick={() => { setModal(!modal); setErrorlog(false);}}>Login</button>\n             }\n           </div>\n        }\n     \n\n      \n      {\n        modal ? <div className='header-modal'>\n                   <h3 onClick={()=>{setModal(false)}}>X</h3>\n           {\n              userExists ? <div> \n                <h2>Login</h2>\n                <form onSubmit={handleLogin}>\n                  <input type=\"text\" placeholder=\"Enter username\" onChange={(e)=>setUsername(e.target.value)}/>\n                  <input type=\"password\" placeholder=\"Enter password\" onChange={(e)=>setPassword(e.target.value)}/>\n                  <button className='login-btn' type=\"submit\" onChange={(e)=>setImageUrl(e.target.value)}>Submit</button>\n                </form>\n                {errorlog ? <p style={{\"color\":\"#FFE66D\"}}>Wrong password or username..</p> : null }\n                <p>Don't have an account? <span onClick={()=>{setUserExists(false)}}>Sign up</span></p>\n                {message !== '' ? <p>{message}</p> : null}\n\n              </div>\n              : <div> \n                <h2>Sign Up</h2>\n                <form onSubmit={handleSignup}>\n                  <input type=\"text\" placeholder=\"Enter username\" onChange={(e)=>setUsername(e.target.value)}/>\n                  <input type=\"password\" placeholder=\"Enter password\" onChange={(e)=>setPassword(e.target.value)}/>\n                  <input type=\"text\" placeholder=\"Enter image url\" onChange={(e)=>setImageUrl(e.target.value)}/>\n                  <button className='login-btn' type=\"submit\">Submit</button>\n                </form>\n                {\n                  signupSuccess ? <p style={{\"color\":\"green\"}}>Signed up successfully. <span onClick={()=>{setUserExists(true)}}>Login</span></p>\n                  : <p>Already have an account? <span onClick={()=>{setUserExists(true)}}>Login</span></p>\n                }\n                \n                \n              </div>\n           }\n        </div> \n        : null\n      }\n\n    </div>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}